name = "sqlite-wiki-search"
main = "src/index.ts"
compatibility_date = "2025-01-01"
compatibility_flags = ["nodejs_compat"]
account_id = "<REDACTED_ACCOUNT_ID>"

# Enable workers.dev subdomain
workers_dev = false

# AI binding for AutoRAG access
[ai]
binding = "AI"

# Environment variables
[vars]
# Comma-separated list of allowed origins for CORS
# Use "*" to allow all origins (not recommended for production)
# Example: "https://adamic.tech,https://docs.adamic.tech"
ALLOWED_ORIGINS = "*"

# Production configuration
[env.production]
vars = { ALLOWED_ORIGINS = "https://adamic.tech" }

# Custom domain routes
routes = [
  { pattern = "search.adamic.tech/*", zone_name = "adamic.tech" },
  { pattern = "adamic.tech/wiki-search/*", zone_name = "adamic.tech" }
]

# Workers Logs configuration
[observability]
[observability.logs]
enabled = true
head_sampling_rate = 1
persist = true
invocation_logs = true

[observability.traces]
enabled = true
head_sampling_rate = 1
persist = true
